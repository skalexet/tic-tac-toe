"use strict";var clickable,matrix=[],engine=function(e,t,n){return matrix[e][t]==n},win=function(e){dialogWindow("".concat(e," has won"))},restart=function(){for(document.querySelector("tbody").remove(),document.querySelector("div").remove();matrix.length>0;)matrix.pop();install()},dialogWindow=function(e){var t=document.createElement("div"),n=document.createElement("span"),r=document.createElement("button");n.innerText=e,r.innerText="X",r.addEventListener("click",restart),t.appendChild(n),t.appendChild(r),document.body.appendChild(t)},checkForCats=function(){for(var e=0,t=0,n=matrix;t<n.length;t++){e+=n[t].includes(0)?1:0}return 0===e&&(dialogWindow("Cat's game :3"),!0)},checkScores=function(e,t){return e<3?1:(win(t),!1)},score=function(e,t,n){var r=0,o=e,c=t;for(r++;++o<matrix.length;)engine(o,c,n)&&r++;for(o=e;--o>=0;)engine(o,c,n)&&r++;if(o=e,r=checkScores(r,n)){for(;--c>=0;)engine(o,c,n)&&r++;for(c=t;matrix[o].length>++c;)engine(o,c,n)&&r++;if(c=t,r=checkScores(r,n)){for(;++c>=0&&++o<matrix.length;)engine(o,c,n)&&r++;for(o=e,c=t;--c>=0&&--o>=0;)engine(o,c,n)&&r++;if(o=e,c=t,r=checkScores(r,n)){for(;++c<matrix.length&&--o>=0;)engine(o,c,n)&&r++;for(o=e,c=t;--c>=0&&++o<matrix.length;)engine(o,c,n)&&r++;o=e,c=t,(r=checkScores(r,n))&&(checkForCats()||(clickable=!0))}}}};function opposite(e,t){clickable&&(clickable=!1,setTimeout((function(){for(;"X"==matrix[e][t]||"O"==matrix[e][t];)e=Math.floor(3*Math.random()),t=Math.floor(3*Math.random());matrix[e][t]="O",score(e,t,"O"),drawO(e,t)}),750))}function controller(e,t,n){"X"!=matrix[t][n]&&"O"!=matrix[t][n]&&clickable&&(clickable=!1,matrix[t][n]="X",e.innerText="X",e.style.color="red",score(t,n,"X"),opposite(t,n))}function drawO(e,t){document.querySelectorAll("tr")[e].querySelectorAll("td")[t].innerText="O"}function install(){for(var e=document.querySelector("table"),t=document.createElement("tbody"),n=0;n<3;n++)matrix.push([0,0,0]);for(var r=function(e){for(var n=document.createElement("tr"),r=function(t){var r=document.createElement("td");r.addEventListener("click",(function(n){controller(n.target,e,t)})),n.appendChild(r)},o=0;o<3;o++)r(o);t.appendChild(n)},o=0;o<3;o++)r(o);e.appendChild(t),clickable=!0}install();